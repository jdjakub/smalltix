# containsInstanceOf: aClass
#     self do: [ :elem | (elem isMemberOf: aClass) ifTrue: [^true] ].
#     ^false
#
self=$1
aClass=$2

# Early return infrastructure
export SMALLTIX_RETURN_FILE="/tmp/smalltix_return_$$"

smalltix_handle_return() {
    if [[ -s $SMALLTIX_RETURN_FILE ]]; then
        cat $SMALLTIX_RETURN_FILE
        rm -f "$SMALLTIX_RETURN_FILE"
        exit 0
    else
        exit 2
    fi
}
trap 'smalltix_handle_return' ERR
trap 'rm -f "$SMALLTIX_RETURN_FILE"' EXIT

tmp1=$(./send Array with-with- $self $aClass)
blockDir=${0%/*}
tmp2=$(./send BlockClosure fromCode-with- $blockDir/containsInstanceOf-~block1 $tmp1)
tmp3=$(./send $self do- $tmp2)
echo false
